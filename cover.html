<!DOCTYPE html>
<html lang="en" class="dark">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Lab Report Index Page (A4 + Editable + PDF)</title>

  <!-- Tailwind CDN -->
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = { darkMode: 'class' };
  </script>

  <!-- jsPDF + html2canvas -->
  <script src="https://cdn.jsdelivr.net/npm/jspdf@2.5.1/dist/jspdf.umd.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script>

  <style>
    /* A4 exact size */
    .a4-page{ width:210mm; height:297mm; background:#fff; color:#111; }
    @media print{
      #topbar, #outerCard, #hint { display:none !important; }
      .a4-page{ box-shadow:none !important; border-radius:0 !important; }
    }

    /* contenteditable focus */
    [contenteditable="true"]{ outline:none; border-radius:8px; }
    [contenteditable="true"]:focus{
      background: rgba(77,163,255,.10);
      box-shadow: 0 0 0 2px rgba(77,163,255,.35);
    }

    /* Table print-safe */
    table{ width:100%; border-collapse:collapse; table-layout:fixed; }
    th, td{ border:1px solid #111; word-wrap:break-word; }
  </style>
</head>

<body class="m-0 font-sans text-white bg-[radial-gradient(1200px_600px_at_10%_10%,#1c2a4a_0%,#0b1220_55%,#060a14_100%)]">

  <!-- Top bar -->
  <div id="topbar" class="sticky top-0 z-50 border-b border-white/10 bg-slate-950/70 backdrop-blur">
    <div class="max-w-6xl mx-auto px-4 py-3 flex flex-wrap items-center justify-between gap-2">
      <div class="text-sm text-white/90">
        <span class="font-semibold">Lab Report</span>
        <span class="text-white/60">• Index Page • A4 • Editable • PDF</span>
      </div>
      <div class="flex flex-wrap gap-2">
        <button id="addRowBtn"
          class="px-3 py-2 rounded-lg bg-white/10 hover:bg-white/15 border border-white/10 text-sm">
          + Add Row
        </button>
        <button id="removeRowBtn"
          class="px-3 py-2 rounded-lg bg-white/10 hover:bg-white/15 border border-white/10 text-sm">
          − Remove Last
        </button>
        <button id="pdfBtn"
          class="px-3 py-2 rounded-lg bg-blue-500 hover:bg-blue-600 text-white text-sm font-semibold">
          Download PDF
        </button>
      </div>
    </div>
  </div>

  <div id="hint" class="max-w-6xl mx-auto px-4 pt-4 text-sm text-white/70">
    টেবিলের ভিতরে ক্লিক করে লিখতে পারবেন। PDF করলে A4 তে একদম একইরকম থাকবে।
  </div>

  <!-- Outer card ONLY (preview) -->
  <div id="outerCard" class="max-w-6xl mx-auto px-4 pb-10">
    <div class="mt-4 rounded-2xl border border-white/10 bg-slate-900/60 backdrop-blur p-4">
      <div class="flex justify-center overflow-auto">
        <div class="a4-page rounded-xl shadow-[0_22px_80px_rgba(0,0,0,.55)] overflow-hidden" id="page">

          <!-- A4 padding + layout -->
          <div class="h-full p-[14mm] flex flex-col">

            <!-- Header -->
            <div>
              <!-- Logo -->
              <div class="flex justify-center">
                <img
                  id="logoPreview"
                  src="Image/Logo_of_Premier_University_(PU).png"
                  alt="Premier University Logo"
                  class="h-[36mm] w-[54mm] object-contain"
                />
              </div>

              <!-- Uni + Dept -->
              <div class="mt-2 text-center">
                <div id="p_uniTitle" contenteditable="true"
                     class="text-[18pt] font-black tracking-wide text-black px-2 py-1 inline-block">
                  PREMIER UNIVERSITY CHATTOGRAM
                </div>

                <div class="mt-1 inline-block border border-black px-2 py-[2px] text-[9pt] text-black">
                  <span id="p_deptPrefix" contenteditable="true" class="font-normal px-1">DEPARTMENT OF</span>
                  <span class="mx-[2px]"></span>
                  <span id="p_deptBold" contenteditable="true" class="font-black px-1">COMPUTER SCIENCE AND ENGINEERING</span>
                </div>
              </div>
            </div>

            <!-- ✅ Middle content (vertically centered) -->
            <div class="flex-1 flex flex-col justify-center">

              <!-- Left-side info (serially, left aligned) -->
              <div class="mt-3 text-[11.5pt] leading-[1.55] text-black">
                <div class="flex gap-3 items-baseline mb-1">
                  <div class="font-black min-w-[32mm]">Name:</div>
                  <div contenteditable="true" class="min-w-[90mm] px-2 py-1">______________________________</div>
                </div>
                <div class="flex gap-3 items-baseline mb-1">
                  <div class="font-black min-w-[32mm]">ID:</div>
                  <div contenteditable="true" class="min-w-[90mm] px-2 py-1">______________________________</div>
                </div>
                <div class="flex gap-3 items-baseline mb-1">
                  <div class="font-black min-w-[32mm]">Course Title:</div>
                  <div contenteditable="true" class="min-w-[90mm] px-2 py-1">Neural Network &amp; Fuzzy Logic Laboratory</div>
                </div>
                <div class="flex gap-3 items-baseline">
                  <div class="font-black min-w-[32mm]">Course Code:</div>
                  <div contenteditable="true" class="min-w-[90mm] px-2 py-1">CSE 452</div>
                </div>
              </div>

              <!-- Index title -->
              <div class="mt-2 text-center text-black">
                <div class="text-[20pt] font-extrabold">Index</div>
              </div>

              <!-- Table -->
              <div class="mt-3">
                <table class="text-black">
                  <thead>
                    <tr class="bg-gray-100">
                      <th class="py-3 px-3 text-center font-black text-[14px]" style="width:12%;">No</th>
                      <th class="py-3 px-3 text-center font-black text-[14px]" style="width:56%;">Title</th>
                      <th class="py-3 px-3 text-center font-black text-[14px]" style="width:18%;">Date</th>
                      <th class="py-3 px-3 text-center font-black text-[14px]" style="width:14%;">Remarks</th>
                    </tr>
                  </thead>

                  <tbody id="tbody">
                    <!-- ✅ 12 rows (Typing starts from LEFT in Title/Remarks like আগের মতো) -->
                    <!-- Title/Remarks: text-left + pl-3, Date: text-center -->
                    <tr class="h-[11.6mm]">
                      <td class="text-center font-semibold py-3 px-3">1</td>
                      <td contenteditable="true" class="text-left py-3 px-3 pl-3"></td>
                      <td contenteditable="true" class="text-center py-3 px-3"></td>
                      <td contenteditable="true" class="text-left py-3 px-3 pl-3"></td>
                    </tr>
                    <tr class="h-[11.6mm]">
                      <td class="text-center font-semibold py-3 px-3">2</td>
                      <td contenteditable="true" class="text-left py-3 px-3 pl-3"></td>
                      <td contenteditable="true" class="text-center py-3 px-3"></td>
                      <td contenteditable="true" class="text-left py-3 px-3 pl-3"></td>
                    </tr>
                    <tr class="h-[11.6mm]">
                      <td class="text-center font-semibold py-3 px-3">3</td>
                      <td contenteditable="true" class="text-left py-3 px-3 pl-3"></td>
                      <td contenteditable="true" class="text-center py-3 px-3"></td>
                      <td contenteditable="true" class="text-left py-3 px-3 pl-3"></td>
                    </tr>
                    <tr class="h-[11.6mm]">
                      <td class="text-center font-semibold py-3 px-3">4</td>
                      <td contenteditable="true" class="text-left py-3 px-3 pl-3"></td>
                      <td contenteditable="true" class="text-center py-3 px-3"></td>
                      <td contenteditable="true" class="text-left py-3 px-3 pl-3"></td>
                    </tr>
                    <tr class="h-[11.6mm]">
                      <td class="text-center font-semibold py-3 px-3">5</td>
                      <td contenteditable="true" class="text-left py-3 px-3 pl-3"></td>
                      <td contenteditable="true" class="text-center py-3 px-3"></td>
                      <td contenteditable="true" class="text-left py-3 px-3 pl-3"></td>
                    </tr>
                    <tr class="h-[11.6mm]">
                      <td class="text-center font-semibold py-3 px-3">6</td>
                      <td contenteditable="true" class="text-left py-3 px-3 pl-3"></td>
                      <td contenteditable="true" class="text-center py-3 px-3"></td>
                      <td contenteditable="true" class="text-left py-3 px-3 pl-3"></td>
                    </tr>
                    <tr class="h-[11.6mm]">
                      <td class="text-center font-semibold py-3 px-3">7</td>
                      <td contenteditable="true" class="text-left py-3 px-3 pl-3"></td>
                      <td contenteditable="true" class="text-center py-3 px-3"></td>
                      <td contenteditable="true" class="text-left py-3 px-3 pl-3"></td>
                    </tr>
                    <tr class="h-[11.6mm]">
                      <td class="text-center font-semibold py-3 px-3">8</td>
                      <td contenteditable="true" class="text-left py-3 px-3 pl-3"></td>
                      <td contenteditable="true" class="text-center py-3 px-3"></td>
                      <td contenteditable="true" class="text-left py-3 px-3 pl-3"></td>
                    </tr>
                    <tr class="h-[11.6mm]">
                      <td class="text-center font-semibold py-3 px-3">9</td>
                      <td contenteditable="true" class="text-left py-3 px-3 pl-3"></td>
                      <td contenteditable="true" class="text-center py-3 px-3"></td>
                      <td contenteditable="true" class="text-left py-3 px-3 pl-3"></td>
                    </tr>
                    <tr class="h-[11.6mm]">
                      <td class="text-center font-semibold py-3 px-3">10</td>
                      <td contenteditable="true" class="text-left py-3 px-3 pl-3"></td>
                      <td contenteditable="true" class="text-center py-3 px-3"></td>
                      <td contenteditable="true" class="text-left py-3 px-3 pl-3"></td>
                    </tr>
                    <tr class="h-[11.6mm]">
                      <td class="text-center font-semibold py-3 px-3">11</td>
                      <td contenteditable="true" class="text-left py-3 px-3 pl-3"></td>
                      <td contenteditable="true" class="text-center py-3 px-3"></td>
                      <td contenteditable="true" class="text-left py-3 px-3 pl-3"></td>
                    </tr>
                    <tr class="h-[11.6mm]">
                      <td class="text-center font-semibold py-3 px-3">12</td>
                      <td contenteditable="true" class="text-left py-3 px-3 pl-3"></td>
                      <td contenteditable="true" class="text-center py-3 px-3"></td>
                      <td contenteditable="true" class="text-left py-3 px-3 pl-3"></td>
                    </tr>
                  </tbody>
                </table>
              </div>

            </div>

            <!-- Footer -->
            <div class="pt-3 text-[11px] text-gray-600 flex justify-start">
              <div contenteditable="true" class="text-black/60 px-2 py-1">Submitted To: ____________________</div>
            </div>

          </div>
        </div>
      </div>
    </div>
  </div>

  <script>
    const tbody = document.getElementById('tbody');

    function renumber(){
      [...tbody.querySelectorAll('tr')].forEach((tr, i) => {
        tr.children[0].textContent = String(i + 1);
      });
    }

    document.getElementById('addRowBtn').addEventListener('click', () => {
      const tr = document.createElement('tr');
      tr.className = 'h-[11.6mm]';

      const tdNo = document.createElement('td');
      tdNo.className = 'text-center font-semibold py-3 px-3';
      tdNo.textContent = String(tbody.children.length + 1);

      const tdTitle = document.createElement('td');
      tdTitle.setAttribute('contenteditable','true');
      tdTitle.className = 'text-left py-3 px-3 pl-3';

      const tdDate = document.createElement('td');
      tdDate.setAttribute('contenteditable','true');
      tdDate.className = 'text-center py-3 px-3';

      const tdRem = document.createElement('td');
      tdRem.setAttribute('contenteditable','true');
      tdRem.className = 'text-left py-3 px-3 pl-3';

      tr.append(tdNo, tdTitle, tdDate, tdRem);
      tbody.appendChild(tr);
    });

    document.getElementById('removeRowBtn').addEventListener('click', () => {
      if (tbody.children.length > 1) tbody.removeChild(tbody.lastElementChild);
      renumber();
    });

    document.getElementById('pdfBtn').addEventListener('click', async () => {
      if (document.activeElement) document.activeElement.blur();

      const el = document.getElementById('page');

      const canvas = await html2canvas(el, {
        scale: Math.max(2, window.devicePixelRatio || 2),
        useCORS: true,
        allowTaint: true,
        backgroundColor: '#ffffff',
        logging: false
      });

      const imgData = canvas.toDataURL('image/jpeg', 0.98);
      const { jsPDF } = window.jspdf;

      const pdf = new jsPDF('p', 'mm', 'a4');
      pdf.addImage(imgData, 'JPEG', 0, 0, 210, 297);
      pdf.save('Lab_Report_Index_A4.pdf');
    });
  </script>

</body>
</html>
